<script src="/fuzor/fuzor.js"></script>
<script src="/fuzor/x2j.js"></script>

<div class="card-box">
    <div class="row">

        <div class="col-sm-12">
            <h4 class="header-title m-t-0"><b>获取数据</b></h4>
            <p class="text-muted m-b-30 font-13">
                请依次点击下列按钮
            </p>

            <div class="button-list">

                <a href="fuzor://<%= model.model %>">
                    <button type="button" class="btn btn-default btn-custom waves-effect waves-light">激活Fuzor</button>
                </a>
                <button id="getModelData" type="button" class="btn btn-primary btn-custom waves-effect waves-light">
                    获取数据
                </button>

            </div>
        </div>


    </div>
</div>

<script>


    var LOCAL_DATA;

    //createMenu(getMenuData(FAKE))
    var fuzor = new Fuzor()

    //    var modelId = $('#model-id-container').val();

//    var localData = window.localStorage.getItem(modelId)
//
//    if(localData) {
//
//        var obj = JSON.parse(localData)
//
//        createMenu(getMenuData(obj.data))
//    }

    $('#getModelData').click(function () {

        $('#guide').html('正在获取数据请稍等...').css('color', 'red');


        fuzor.getModelData(function (data) {

            LOCAL_DATA = data;

            //window.localStorage.setItem(modelId,JSON.stringify({data: data}))

            createMenu(getMenuData(data))

        })
    })


</script>